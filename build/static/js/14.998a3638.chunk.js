(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[14],{1036:function(e,t,n){"use strict";n.r(t);var r=n(215),a=n(6),o=n(30),i=n(32),c=n(2),s=n(133),u=n(4),l=function(e){return e.messages.form},d=Object(u.a)([l],(function(e){return e.record})),b={selectInitLoading:Object(u.a)([l],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:Object(u.a)([l],(function(e){return Boolean(e.saveLoading)})),selectRecord:d,selectRaw:l},m=n(7),f=n(0),j=n(702),g=n(24),O=n(105),p=n(705),h=n(701),x=n(704),v=n(703),y=n(795),w=n(35),C=n(13),k=w.e().shape({from:x.a.relationToOne(Object(c.d)("entities.messages.fields.from"),{required:!0}),to:x.a.relationToOne(Object(c.d)("entities.messages.fields.to"),{required:!0}),message:x.a.string(Object(c.d)("entities.messages.fields.message"),{required:!0})});var N=function(e){var t=e.saveLoading,n=Object(a.useState)((function(){var t=e.record||{};return{from:t.from,to:t.to,message:t.message}})),o=Object(r.a)(n,1)[0],i=Object(h.c)({resolver:Object(p.yupResolver)(k),mode:"all",defaultValues:o}),s=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return Object(C.jsx)(h.a,Object(f.a)(Object(f.a)({},i),{},{children:Object(C.jsxs)("form",{onSubmit:i.handleSubmit(s),children:[Object(C.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md",children:Object(C.jsx)(y.a,{name:"from",label:Object(c.d)("entities.messages.fields.from"),required:!0,showCreate:!e.modal})}),Object(C.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(C.jsx)(y.a,{name:"to",label:Object(c.d)("entities.messages.fields.to"),required:!0,showCreate:!e.modal})}),Object(C.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(C.jsx)(v.a,{name:"message",label:Object(c.d)("entities.messages.fields.message"),required:!0})}),Object(C.jsxs)("div",{className:"pt-4",children:[Object(C.jsxs)("button",{className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",disabled:t,type:"button",onClick:i.handleSubmit(s),children:[Object(C.jsx)(O.a,{className:"mr-2",icon:j.e}),Object(c.d)("common.save")]}),Object(C.jsxs)("button",{disabled:t,onClick:function(){Object.keys(o).forEach((function(e){i.setValue(e,o[e])}))},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(C.jsx)(O.a,{className:"mr-2",icon:g.t}),Object(c.d)("common.reset")]}),e.onCancel?Object(C.jsxs)("button",{disabled:t,onClick:function(){return e.onCancel()},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(C.jsx)(O.a,{className:"mr-2",icon:g.s}),Object(c.d)("common.cancel")]}):null]})]})}))},S=n(708),q=n(712);t.default=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),u=n[0],l=n[1],d=Object(o.d)(),f=Object(i.h)(),j=Object(o.e)(b.selectInitLoading),g=Object(o.e)(b.selectSaveLoading),O=Object(o.e)(b.selectRecord),p=Boolean(f.params.id),h=p?Object(c.d)("entities.messages.edit.title"):Object(c.d)("entities.messages.new.title");return Object(a.useEffect)((function(){d(s.a.doInit(f.params.id)),l(!0)}),[d,f.params.id]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a,{items:[[Object(c.d)("dashboard.menu"),"/network"],[Object(c.d)("entities.messages.menu"),"/messages"],[h]]}),Object(C.jsxs)("div",{className:"mt-4 p-6 bg-white dark:bg-gray-800 dark:border-gray-800 text-gray-900 dark:text-gray-200 border-gray-200 border rounded-md",children:[Object(C.jsx)("h1",{className:"text-lg font-medium mb-6",children:h}),j&&Object(C.jsx)(q.a,{}),u&&!j&&Object(C.jsx)(N,{saveLoading:g,initLoading:j,record:O,isEditing:p,onSubmit:function(e,t){d(p?s.a.doUpdate(e,t):s.a.doCreate(t))},onCancel:function(){return Object(m.b)().push("/messages")}})]})]})}},703:function(e,t,n){"use strict";var r=n(215),a=n(6),o=n(701),i=n(706),c=n(692),s=n(13);function u(e){var t=Object(a.useState)(Object(c.a)()),n=Object(r.a)(t,1)[0],u=e.label,l=e.name,d=e.hint,b=e.type,m=e.placeholder,f=e.autoFocus,j=e.autoComplete,g=e.required,O=e.externalErrorMessage,p=e.disabled,h=e.endAdornment,x=Object(o.d)(),v=x.register,y=x.errors,w=x.formState,C=w.touched,k=w.isSubmitted,N=i.a.errorMessage(l,y,C,k,O);return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[Boolean(u)&&Object(s.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",htmlFor:n,children:[u," ",g?Object(s.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(s.jsxs)("div",{className:"flex flex-nowrap items-baseline",children:[Object(s.jsx)("input",{id:n,name:l,type:b,ref:v,onChange:function(t){e.onChange&&e.onChange(t.target.value)},onBlur:function(t){e.onBlur&&e.onBlur(t)},placeholder:m||void 0,autoFocus:f||void 0,autoComplete:j||void 0,disabled:p,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring ".concat(N?"border-red-400 text-red-600":"")}),h&&Object(s.jsx)("span",{className:"ml-2 text-gray-700",children:h})]})]}),Object(s.jsx)("div",{className:"text-red-600 text-sm mt-2",children:N}),Boolean(d)&&Object(s.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:d})]})}u.defaultProps={type:"text",required:!1},t.a=u},704:function(e,t,n){"use strict";var r=n(16),a=n(35),o=n(2),i=n(36),c=n.n(i),s={generic:function(e){return a.c().label(e)},string:function(e,t){t=t||{};var n=a.h().transform((function(e,t){return""===t?null:e})).nullable(!0).trim().label(e);return t.required&&(n=n.required()),(t.min||0===t.min)&&(n=n.min(t.min)),t.max&&(n=n.max(t.max)),t.matches&&(n=n.matches(t.matches)),n},boolean:function(e,t){return a.b().default(!1).label(e)},relationToOne:function(e,t){t=t||{};var n=a.c().nullable(!0).label(e).transform((function(e,t){return t?t.id:null}));return t.required&&(n=n.required()),n},stringArray:function(e,t){t=t||{};var n=a.a().compact().ensure().of(a.h().transform((function(e,t){return""===t?null:e})).trim()).label(e);return(t.required||t.min)&&(n=n.required()),t.min||0===t.min?n=n.min(t.min):t.required&&(n=n.min(1)),t.max&&(n=n.max(t.max)),n},relationToMany:function(e,t){t=t||{};var n=a.a().nullable(!0).label(e).transform((function(e,t){return t&&t.length?t.map((function(e){return e.id})):[]}));return(t.required||t.min)&&(n=n.required()),t.min||0===t.min?n=n.min(t.min):t.required&&(n=n.min(1)),t.max&&(n=n.max(t.max)),n},integer:function(e,t){t=t||{};var n=a.d().transform((function(e,t){return""===t?null:e})).integer().nullable(!0).label(e);return t.required&&(n=n.required()),(t.min||0===t.min)&&(n=n.min(t.min)),t.max&&(n=n.max(t.max)),n},images:function(e,t){t=t||{};var n=a.a().nullable(!0).label(e);return(t.required||t.min)&&(n=n.required()),t.min||0===t.min?n=n.min(t.min):t.required&&(n=n.min(1)),t.max&&(n=n.max(t.max)),n},files:function(e,t){t=t||{};var n=a.a().compact().ensure().nullable(!0).label(e);return(t.required||t.min)&&(n=n.required()),t.min||0===t.min?n=n.min(t.min):t.required&&(n=n.min(1)),t.max&&(n=n.max(t.max)),n},enumerator:function(e,t){t=t||{};var n=a.h().transform((function(e,t){return""===t?null:e})).label(e).nullable(!0).oneOf([null].concat(Object(r.a)(t.options||[])));return t.required&&(n=n.required(Object(o.d)("validation.string.selected"))),n},email:function(e,t){t=t||{};var n=a.h().transform((function(e,t){return""===t?null:e})).nullable(!0).trim().label(e).email();return t.required&&(n=n.required()),(t.min||0===t.min)&&(n=n.min(t.min)),t.max&&(n=n.max(t.max)),t.matches&&(n=n.matches(t.matches)),n},decimal:function(e,t){t=t||{};var n=a.d().transform((function(e,t){return""===t?null:e})).nullable(!0).label(e);return t.required&&(n=n.required()),(t.min||0===t.min)&&(n=n.min(t.min)),t.max&&(n=n.max(t.max)),n},datetime:function(e,t){t=t||{};var n=a.c().nullable(!0).label(e).transform((function(e,t){return e?c()(t,"YYYY-MM-DD HH:mm").toISOString():null}));return t.required&&(n=n.required()),n},date:function(e,t){t=t||{};var n=a.c().nullable(!0).label(e).test("is-date",Object(o.d)("validation.mixed.default"),(function(e){return!e||c()(e,"YYYY-MM-DD").isValid()})).transform((function(e){return e?c()(e).format("YYYY-MM-DD"):null}));return t.required&&(n=n.required()),n}};t.a=s},706:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(14),a=n(15),o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"errorMessage",value:function(e,t,n,r){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(o)return o;if(!r&&!n[e])return null;var i=t[e];return(null===i||void 0===i||null===(a=i[0])||void 0===a?void 0:a.message)||(null===i||void 0===i?void 0:i.message)||i||null}}]),e}()},707:function(e,t,n){"use strict";var r=n(16),a=n(1),o=n.n(a),i=n(3),c=n(215),s=n(6),u=n(706),l=n(739),d=n(2),b=n(701),m=n(766),f=n.n(m),j=n(30),g=n(112),O=n(24),p=n(105),h=n(726),x=n(692),v=n(13);function y(e){var t=Object(s.useState)(Object(x.a)()),n=Object(c.a)(t,1)[0],a=Object(b.d)(),m=a.errors,y=a.watch,w=a.setValue,C=a.register,k=a.formState,N=k.touched,S=k.isSubmitted,q=e.label,M=e.name,P=e.hint,V=e.placeholder,F=e.autoFocus,B=e.externalErrorMessage,D=e.mode,E=e.required,L=e.isClearable,T=e.mapper,R=e.fetchFn,_=y(M),A=Object(j.e)(g.a.selectDarkMode),Y=Object(s.useState)([]),U=Object(c.a)(Y,2),I=U[0],H=U[1],W=Object(s.useState)(!1),z=Object(c.a)(W,2),J=z[0],G=z[1];Object(s.useEffect)((function(){C({name:M})}),[C,M]),Object(s.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.prev=1,e.next=4,R();case 4:t=(t=e.sent).map((function(e){return T.toAutocomplete(e)})),H(t),G(!1),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),H([]),G(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()().then((function(){}))}),[]);var K=function(e){return(I||[]).find((function(t){return t.value===e.value}))||e},Q=function(){return"multiple"===D?X():Z()},X=function(){return _?_.map((function(e){return K(T.toAutocomplete(e))})):[]},Z=function(){return _?K(T.toAutocomplete(_)):null},$=function(t){if(!t)return w(M,[],{shouldValidate:!0}),void(e.onChange&&e.onChange([]));var n=t.map((function(e){return T.toValue(e)}));w(M,n,{shouldValidate:!0}),e.onChange&&e.onChange(n)},ee=function(t){if(!t)return w(M,null,{shouldValidate:!0}),void(e.onChange&&e.onChange(null));var n=T.toValue(t);w(M,n,{shouldValidate:!0}),e.onChange&&e.onChange(n)},te=J?Object(d.d)("autocomplete.loading"):P,ne=u.a.errorMessage(M,m,N,S,B),re=Object(h.a)(A,Boolean(ne));return Object(v.jsxs)("div",{children:[Boolean(q)&&Object(v.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",htmlFor:n,children:[q," ",E?Object(v.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(l.a,{className:"w-full mt-2",styles:re,id:n,name:M,isMulti:"multiple"===D,placeholder:V||"",autoFocus:F||void 0,onChange:function(e){return"multiple"===D?$(e):ee(e)},value:Q(),isClearable:L,options:function(){var t=e.mode;return I?Q()?"multiple"===t?f()([].concat(Object(r.a)(I),Object(r.a)(Q())),"value"):f()([].concat(Object(r.a)(I),[Q()]),"value"):I:[]}(),onBlur:function(t){e.onBlur&&e.onBlur(t)},loadingMessage:function(){return Object(d.d)("autocomplete.loading")},noOptionsMessage:function(){return Object(d.d)("autocomplete.noOptions")}}),e.showCreate&&e.hasPermissionToCreate?Object(v.jsx)("button",{className:"mt-2 ml-2 flex-shrink-0 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",type:"button",onClick:e.onOpenModal,style:{height:42},children:Object(v.jsx)(p.a,{icon:O.m})}):null]}),Object(v.jsx)("div",{className:"text-red-600 text-sm mt-2",children:ne}),Boolean(te)&&Object(v.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:te})]})}y.defaultProps={isClearable:!0,mode:"default",required:!1},t.a=y},708:function(e,t,n){"use strict";var r=n(24),a=n(105),o=(n(6),n(110)),i=n(13);t.a=function(e){var t=function(e){return e.length>1};return Object(i.jsx)("ol",{className:"text-sm flex items-center",children:e.items.map((function(n,c){var s=0===c,u=e.items.length-1===c;return Object(i.jsxs)("li",{className:"".concat(u?"text-gray-800 dark:text-white":"text-gray-500 dark:text-gray-200 mr-2"),children:[!s&&Object(i.jsx)(a.a,{className:"mr-2 font-normal text-gray-400 dark:text-gray-200",icon:r.d}),t(n)?Object(i.jsx)(o.a,{className:"hover:underline",to:n[1],children:n[0]}):n[0]]},n[0])}))})}},712:function(e,t,n){"use strict";n(6);var r=n(13);t.a=function(){return Object(r.jsx)("div",{className:"w-full flex justify-center items-center mt-12 mb-12",children:Object(r.jsx)("div",{className:"spinner"})})}},713:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},714:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},715:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(308);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},716:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(730),a=n.n(r),o=n(738);function i(e,t){return!t||"object"!==a()(t)&&"function"!==typeof t?Object(o.a)(e):t}},717:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},726:function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){return t?{container:function(e){return Object(r.a)(Object(r.a)({},e),{},{borderRadius:"0.375rem",cursor:"pointer"})},control:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{minHeight:"42px",borderColor:"rgb(248, 113, 113)",color:"rgb(220, 38, 38)",cursor:n.isDisabled?"default":"pointer",backgroundColor:e?"rgb(31, 41, 55)":"white"})},indicatorSeparator:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{backgroundColor:"rgb(248, 113, 113)"})},singleValue:function(e){return Object(r.a)(Object(r.a)({},e),{},{color:"rgb(220, 38, 38)"})},menu:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{backgroundColor:e?"rgb(31, 41, 55)":"white"})},option:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{cursor:"pointer",backgroundColor:e?n.isFocused?"rgb(209, 213, 219)":"rgb(31, 41, 55)":n.isFocused?"rgb(55, 65, 81)":"white",color:e?n.isFocused?"rgb(55, 65, 81)":"rgb(209, 213, 219)":n.isFocused?"white":"rgb(55, 65, 81)"})},multiValue:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{color:e?n.isFocused?"rgb(55, 65, 81)":"rgb(209, 213, 219)":n.isFocused?"white":"rgb(55, 65, 81)"})},input:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{color:e?n.isFocused?"rgb(55, 65, 81)":"rgb(209, 213, 219)":n.isFocused?"white":"rgb(55, 65, 81)"})},multiValueRemove:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{color:"rgb(55, 65, 81)"})}}:{container:function(e){return Object(r.a)(Object(r.a)({},e),{},{borderRadius:"0.375rem",cursor:"pointer"})},control:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{minHeight:"42px",cursor:n.isDisabled?"default":"pointer",color:e?"rgb(229, 231, 235)":"rgb(55, 65, 81)",backgroundColor:e?"rgb(31, 41, 55)":"white",borderColor:e?"rgb(75, 85, 99)":"rgb(209, 213, 219)"})},indicatorSeparator:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{backgroundColor:e?"rgb(75, 85, 99)":"rgb(209, 213, 219)"})},singleValue:function(t){return Object(r.a)(Object(r.a)({},t),{},{color:e?"rgb(229, 231, 235)":"rgb(55, 65, 81)"})},menu:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{backgroundColor:e?"rgb(31, 41, 55)":"white"})},option:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{cursor:"pointer",backgroundColor:e?n.isFocused?"rgb(209, 213, 219)":"rgb(31, 41, 55)":n.isFocused?"rgb(55, 65, 81)":"white",color:e?n.isFocused?"rgb(55, 65, 81)":"rgb(209, 213, 219)":n.isFocused?"white":"rgb(55, 65, 81)"})},input:function(t,n){return Object(r.a)(Object(r.a)({},t),{},{color:e?n.isFocused?"rgb(55, 65, 81)":"rgb(209, 213, 219)":n.isFocused?"white":"rgb(55, 65, 81)"})},multiValueRemove:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{color:"rgb(55, 65, 81)"})}}}},727:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},730:function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},738:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},748:function(e,t,n){"use strict";var r=n(215),a=n(6),o=n(739),i=n(2),c=n(701),s=n(706),u=n(30),l=n(112),d=n(726),b=n(692),m=n(13);function f(e){var t=Object(a.useState)(Object(b.a)()),n=Object(r.a)(t,1)[0],f=e.label,j=e.name,g=e.hint,O=e.options,p=e.required,h=e.mode,x=e.placeholder,v=e.isClearable,y=e.externalErrorMessage,w=Object(c.d)(),C=w.register,k=w.errors,N=w.formState,S=N.touched,q=N.isSubmitted,M=w.setValue,P=w.watch,V=s.a.errorMessage(j,k,S,q,y),F=P(j),B=Object(u.e)(l.a.selectDarkMode);Object(a.useEffect)((function(){C({name:j})}),[C,j]);var D=function(){return F?F.map((function(e){return O.find((function(t){return t.value===e}))})):[]},E=function(){var t=e.options;return null!=F?t.find((function(e){return e.value===F})):null},L=function(t){if(!t)return M(j,[],{shouldValidate:!0}),void(e.onChange&&e.onChange([]));var n=t.map((function(e){return e?e.value:e})).filter((function(e){return null!=e}));M(j,n,{shouldValidate:!0}),e.onChange&&e.onChange(n)},T=function(t){if(!t)return M(j,null,{shouldValidate:!0}),void(e.onChange&&e.onChange(null));M(j,t.value,{shouldValidate:!0}),e.onChange&&e.onChange(t.value)},R=Object(d.a)(B,Boolean(V));return Object(m.jsxs)("div",{children:[Boolean(f)&&Object(m.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",htmlFor:n,children:[f," ",p?Object(m.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(m.jsx)(o.a,{className:"w-full mt-2",value:"multiple"===e.mode?D():E(),onChange:function(t){return"multiple"===e.mode?L(t):T(t)},onBlur:function(t){e.onBlur&&e.onBlur(t)},id:n,name:j,options:O,isMulti:"multiple"===h,placeholder:x||"",isClearable:v,styles:R,loadingMessage:function(){return Object(i.d)("autocomplete.loading")},noOptionsMessage:function(){return Object(i.d)("autocomplete.noOptions")}}),Object(m.jsx)("div",{className:"text-red-600 text-sm mt-2",children:V}),Boolean(g)&&Object(m.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:g})]})}f.defaultProps={required:!1,isClearable:!0},t.a=f},766:function(e,t,n){var r=n(303),a=n(767);e.exports=function(e,t){return e&&e.length?a(e,r(t,2)):[]}},767:function(e,t,n){var r=n(462),a=n(768),o=n(773),i=n(463),c=n(774),s=n(461);e.exports=function(e,t,n){var u=-1,l=a,d=e.length,b=!0,m=[],f=m;if(n)b=!1,l=o;else if(d>=200){var j=t?null:c(e);if(j)return s(j);b=!1,l=i,f=new r}else f=t?[]:m;e:for(;++u<d;){var g=e[u],O=t?t(g):g;if(g=n||0!==g?g:0,b&&O===O){for(var p=f.length;p--;)if(f[p]===O)continue e;t&&f.push(O),m.push(g)}else l(f,O,n)||(f!==m&&f.push(O),m.push(g))}return m}},768:function(e,t,n){var r=n(769);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},769:function(e,t,n){var r=n(770),a=n(771),o=n(772);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,a,n)}},770:function(e,t){e.exports=function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}},771:function(e,t){e.exports=function(e){return e!==e}},772:function(e,t){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},773:function(e,t){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},774:function(e,t,n){var r=n(464),a=n(775),o=n(461),i=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:a;e.exports=i},775:function(e,t){e.exports=function(){}},787:function(e,t,n){"use strict";var r=n(4),a=n(28),o=n(65),i=n(111),c=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(i.a.values.userRead)})),s=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(i.a.values.userEdit)})),u=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(i.a.values.userDestroy)})),l={selectPermissionToRead:c,selectPermissionToEdit:s,selectPermissionToCreate:Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(i.a.values.userCreate)})),selectPermissionToImport:Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(i.a.values.userImport)})),selectPermissionToDestroy:u};t.a=l},792:function(e,t,n){"use strict";var r=n(309),a={status:["active","invited","empty-permissions"],roles:Object.keys(r.a.values)};t.a=a},793:function(e,t,n){"use strict";var r=n(215),a=n(6),o=n.n(a),i=(n(743),n(29)),c=(n(744),n(742)),s=n(727),u=n(713),l=n(714),d=(n(25),n(715)),b=n(716),m=n(717),f=(n(718),n(177),n(730),n(719)),j=n(711),g=(n(709),n(745),n(728),n(746));function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=String(e).toLowerCase(),r=String(t.value).toLowerCase(),a=String(t.label).toLowerCase();return r===n||a===n},x=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n){return!(!e||t.some((function(t){return h(e,t)}))||n.some((function(t){return h(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),v=function(e){var t,n;return n=t=function(t){Object(d.a)(r,t);var n=O(r);function r(e){var t;Object(u.a)(this,r),(t=n.call(this,e)).select=void 0,t.onChange=function(e,n){var r=t.props,a=r.getNewOptionData,o=r.inputValue,i=r.isMulti,s=r.onChange,u=r.onCreateOption,l=r.value,d=r.name;if("select-option"!==n.action)return s(e,n);var b=t.state.newOption,m=Array.isArray(e)?e:[e];if(m[m.length-1]!==b)s(e,n);else if(u)u(o);else{var j=a(o,o),g={action:"create-option",name:d};s(i?[].concat(Object(c.a)(Object(f.b)(l)),[j]):j,g)}};var a=e.options||[];return t.state={newOption:void 0,options:a},t}return Object(l.a)(r,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,n=e.createOptionPosition,r=e.formatCreateLabel,a=e.getNewOptionData,o=e.inputValue,i=e.isLoading,s=e.isValidNewOption,u=e.value,l=e.options||[],d=this.state.newOption;d=s(o,Object(f.b)(u),l)?a(o,r(o)):void 0,this.setState({newOption:d,options:!t&&i||!d?l:"first"===n?[d].concat(Object(c.a)(l)):[].concat(Object(c.a)(l),[d])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var t=this,n=this.state.options;return o.a.createElement(e,Object(i.a)({},this.props,{ref:function(e){t.select=e},options:n,onChange:this.onChange}))}}]),r}(a.Component),t.defaultProps=x,n}(j.a),y=Object(g.a)(v),w=n(2),C=n(701),k=n(706),N=n(30),S=n(112),q=n(726),M=n(692),P=n(13);function V(e){var t=Object(a.useState)(Object(M.a)()),n=Object(r.a)(t,1)[0],o=e.label,i=e.name,c=e.hint,s=e.externalErrorMessage,u=e.required,l=e.placeholder,d=e.isClearable,b=e.notFoundContent,m=Object(C.d)(),f=m.register,j=m.errors,g=m.formState,O=g.touched,p=g.isSubmitted,h=m.setValue,x=m.watch,v=Object(N.e)(S.a.selectDarkMode),V=k.a.errorMessage(i,j,O,p,s);Object(a.useEffect)((function(){f({name:i})}),[f,i]);var F=x(i),B=Object(q.a)(v,Boolean(V));return Object(P.jsxs)("div",{children:[Boolean(o)&&Object(P.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",htmlFor:n,children:[o," ",u?Object(P.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(P.jsx)(y,{className:"w-full mt-2",value:F&&F.length?F.map((function(e){return{value:e,label:e}})):[],onChange:function(t){if(!t||!t.length)return h(i,null,{shouldValidate:!0}),void(e.onChange&&e.onChange(null));var n=t.map((function(e){return e.value})).join(",").split(",");h(i,n,{shouldValidate:!0}),e.onChange&&e.onChange(n)},onBlur:function(t){e.onBlur&&e.onBlur(t)},id:n,name:i,placeholder:l||"",isClearable:d,styles:B,isMulti:!0,formatCreateLabel:function(e){return e},loadingMessage:function(){return Object(w.d)("autocomplete.loading")},noOptionsMessage:function(){return b||""}}),Object(P.jsx)("div",{className:"text-red-600 text-sm mt-2",children:V}),Boolean(c)&&Object(P.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:c})]})}V.defaultProps={required:!1,isClearable:!0};t.a=V},795:function(e,t,n){"use strict";var r=n(0),a=n(16),o=n(215),i=n(6),c=n(100),s=n(1),u=n.n(s),l=n(3),d=n(24),b=n(105),m=n(177),f=n.n(m),j=n(2),g=n(5),O=n(796),p=n(13);var h=function(e){var t=Object(i.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],s=function(){var t=Object(l.a)(u.a.mark((function t(n,r){var o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(!0),t.next=4,c.a.create(r);case 4:return t.next=6,c.a.fetchUsers({email:r.emails[0]},null,1,0);case 6:o=t.sent,i=o.rows,e.onSuccess(i[0]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),g.a.handle(t.t0);case 14:return t.prev=14,a(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,11,14,17]])})));return function(e,n){return t.apply(this,arguments)}}();return f.a.createPortal(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",tabIndex:-1,onClick:e.onClose,children:Object(p.jsx)("div",{className:"relative my-6 mx-auto w-auto",onClick:function(e){return e.stopPropagation()},children:Object(p.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(p.jsxs)("div",{className:"flex items-start justify-between p-5 rounded-t",children:[Object(p.jsx)("div",{className:"text-lg font-semibold",children:Object(j.d)("user.new.titleModal")}),Object(p.jsx)("button",{type:"button",className:"ml-auto bg-transparent border-0 text-gray-900 float-right text-lg leading-none font-semibold outline-none focus:outline-none",onClick:e.onClose,children:Object(p.jsx)("span",{className:"bg-transparent text-gray-700 h-6 w-6 text-lg block outline-none focus:outline-none",children:Object(p.jsx)(b.a,{icon:d.s})})})]}),Object(p.jsx)("div",{className:"relative p-6 flex-auto",children:Object(p.jsx)(O.a,{saveLoading:r,onSubmit:s,onCancel:e.onClose,modal:!0,single:!0})})]})})}),Object(p.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}),document.getElementById("modal-root"))},x=n(707),v=n(701),y=n(30),w=n(787);t.a=function(e){var t=Object(v.d)(),n=t.setValue,s=t.getValues,u=Object(i.useState)(!1),l=Object(o.a)(u,2),d=l[0],b=l[1],m=Object(y.e)(w.a.selectPermissionToCreate);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(x.a,Object(r.a)(Object(r.a)({},e),{},{fetchFn:function(e,t){return c.a.fetchUserAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;if(e.fullName||e.email){var t=e.email;return e.fullName&&(t="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:t}}return{value:e.id,label:e.label}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){return b(!0)},hasPermissionToCreate:m})),d&&Object(p.jsx)(h,{visible:d,onClose:function(){return b(!1)},onSuccess:function(t){var r=e.name,o=e.mode;n(r,o&&"multiple"===o?[].concat(Object(a.a)(s()[r]||[]),[t]):t),b(!1)}})]})}},796:function(e,t,n){"use strict";var r=n(0),a=n(215),o=n(702),i=n(24),c=n(105),s=n(705),u=n(6),l=n(701),d=n(2),b=n(704),m=n(792),f=n(703),j=n(748),g=n(793),O=n(35),p=n(13),h=O.e().shape({email:b.a.email(Object(d.d)("user.fields.email")),roles:b.a.stringArray(Object(d.d)("user.fields.roles"),{required:!0,min:1})}),x=O.e().shape({emails:O.a().label(Object(d.d)("user.fields.emails")).of(O.h().transform((function(e,t){return""===t?null:e})).email(Object(d.d)("user.validations.email")).label(Object(d.d)("user.fields.email")).max(255).required()).required().min(1),roles:b.a.stringArray(Object(d.d)("user.fields.roles"),{required:!0,min:1})});t.a=function(e){var t=e.single,n=e.saveLoading,b=e.single?h:x,O=Object(u.useState)((function(){return{emails:[],email:"",roles:[]}})),v=Object(a.a)(O,1)[0],y=Object(l.c)({resolver:Object(s.yupResolver)(b),mode:"all",defaultValues:v}),w=function(t){var n=Object.assign({},t);n.email&&(n.emails=[n.email],delete n.email),e.onSubmit(null,n)};return Object(p.jsx)(l.a,Object(r.a)(Object(r.a)({},y),{},{children:Object(p.jsxs)("form",{onSubmit:y.handleSubmit(w),children:[Object(p.jsx)("div",{className:"w-full md:w-md lg:w-md",children:t?Object(p.jsx)(f.a,{name:"email",label:Object(d.d)("user.fields.email"),required:!0,autoFocus:!0}):Object(p.jsx)(g.a,{name:"emails",label:Object(d.d)("user.fields.emails"),notFoundContent:Object(d.d)("user.new.emailsHint"),required:!0})}),Object(p.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(p.jsx)(j.a,{name:"roles",label:Object(d.d)("user.fields.roles"),required:!0,options:m.a.roles.map((function(e){return{value:e,label:Object(d.d)("roles.".concat(e,".label"))}})),mode:"multiple"})}),Object(p.jsxs)("div",{className:"pt-4",children:[Object(p.jsxs)("button",{className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",disabled:n,type:"button",onClick:y.handleSubmit(w),children:[Object(p.jsx)(c.a,{className:"mr-2",icon:o.e}),Object(d.d)("common.save")]}),Object(p.jsxs)("button",{disabled:n,onClick:function(){Object.keys(v).forEach((function(e){y.setValue(e,v[e])}))},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(p.jsx)(c.a,{className:"mr-2",icon:i.t}),Object(d.d)("common.reset")]}),e.onCancel?Object(p.jsxs)("button",{disabled:n,onClick:function(){return e.onCancel()},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(p.jsx)(c.a,{className:"mr-2",icon:i.s}),Object(d.d)("common.cancel")]}):null]})]})}))}}}]);