(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[22],{1048:function(e,t,n){"use strict";n.r(t);var r=n(215),a=n(6),o=n(30),i=n(32),c=n(2),s=n(124),l=n(4),u=function(e){return e.petTypes.form},d=Object(l.a)([u],(function(e){return e.record})),b={selectInitLoading:Object(l.a)([u],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:Object(l.a)([u],(function(e){return Boolean(e.saveLoading)})),selectRecord:d,selectRaw:u},m=n(7),f=n(837),p=n(708),g=n(712),j=n(13);t.default=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),l=n[0],u=n[1],d=Object(o.d)(),h=Object(i.h)(),x=Object(o.e)(b.selectInitLoading),y=Object(o.e)(b.selectSaveLoading),O=Object(o.e)(b.selectRecord),v=Boolean(h.params.id),w=v?Object(c.d)("entities.petTypes.edit.title"):Object(c.d)("entities.petTypes.new.title");return Object(a.useEffect)((function(){d(s.a.doInit(h.params.id)),u(!0)}),[d,h.params.id]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(p.a,{items:[[Object(c.d)("dashboard.menu"),"/network"],[Object(c.d)("entities.petTypes.menu"),"/pet-types"],[w]]}),Object(j.jsxs)("div",{className:"mt-4 p-6 bg-white dark:bg-gray-800 dark:border-gray-800 text-gray-900 dark:text-gray-200 border-gray-200 border rounded-md",children:[Object(j.jsx)("h1",{className:"text-lg font-medium mb-6",children:w}),x&&Object(j.jsx)(g.a,{}),l&&!x&&Object(j.jsx)(f.a,{saveLoading:y,initLoading:x,record:O,isEditing:v,onSubmit:function(e,t){d(v?s.a.doUpdate(e,t):s.a.doCreate(t))},onCancel:function(){return Object(m.b)().push("/pet-types")}})]})]})}},713:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},714:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},715:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(308);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},716:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(730),a=n.n(r),o=n(738);function i(e,t){return!t||"object"!==a()(t)&&"function"!==typeof t?Object(o.a)(e):t}},717:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},727:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},730:function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},738:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},790:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(215),a=n(1),o=n.n(a),i=n(3),c=n(14),s=n(15),l=n(791),u=n.n(l),d=n(2),b=n(9),m=n(692),f=n(8),p=n(310),g=n.n(p),j=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"validate",value:function(e,t){if(t){if(t.image&&!e.type.startsWith("image"))throw new Error(Object(d.d)("fileUploader.image"));if(t.storage.maxSizeInBytes&&e.size>t.storage.maxSizeInBytes)throw new Error(Object(d.d)("fileUploader.size",u()(t.storage.maxSizeInBytes)));var n=h(e.name);if(t.formats&&!t.formats.includes(n))throw new Error(Object(d.d)("fileUploader.formats",t.formats.join(", ")))}}},{key:"upload",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,a,i,c,s,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.validate(t,n),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 7:return r=h(t.name),a=Object(m.a)(),i="".concat(a,".").concat(r),e.next=12,this.fetchFileCredentials(i,n);case 12:return c=e.sent,s=c.uploadCredentials,l=c.downloadUrl,u=c.privateUrl,e.next=18,this.uploadToServer(t,s);case 18:return e.abrupt("return",{id:a,name:t.name,sizeInBytes:t.size,publicUrl:s&&s.publicUrl?s.publicUrl:null,privateUrl:u,downloadUrl:l,new:!0});case 19:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchFileCredentials",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.a.get(),e.next=3,b.a.get("/tenant/".concat(r,"/file/credentials"),{params:{filename:t,storageId:n.storage.id}});case 3:return a=e.sent,i=a.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"uploadToServer",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,i,c,s,l,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,a=n.url,i=new FormData,c=0,s=Object.entries(n.fields||{});c<s.length;c++)l=Object(r.a)(s[c],2),u=l[0],d=l[1],i.append(u,d);return i.append("file",t),e.abrupt("return",g.a.post(a,i,{headers:{"Content-Type":"multipart/form-data"}}));case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function h(e){if(!e)return null;var t=/(?:\.([^.]+))?$/.exec(e);return t?t[1]:null}},791:function(e,t,n){"use strict";(function(t){!function(t){var n=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},a={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function o(e){var t,o,i,c,s,l,u,d,b,m,f,p,g,j,h,x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},y=[],O=0,v=void 0,w=void 0;if(isNaN(e))throw new TypeError("Invalid number");return o=!0===x.bits,f=!0===x.unix,t=x.base||2,m=void 0!==x.round?x.round:f?1:2,l=void 0!==x.locale?x.locale:"",u=x.localeOptions||{},p=void 0!==x.separator?x.separator:"",g=void 0!==x.spacer?x.spacer:f?"":" ",h=x.symbols||{},j=2===t&&x.standard||"jedec",b=x.output||"string",c=!0===x.fullform,s=x.fullforms instanceof Array?x.fullforms:[],v=void 0!==x.exponent?x.exponent:-1,i=2<t?1e3:1024,(d=(w=Number(e))<0)&&(w=-w),(-1===v||isNaN(v))&&(v=Math.floor(Math.log(w)/Math.log(i)))<0&&(v=0),8<v&&(v=8),"exponent"===b?v:(0===w?(y[0]=0,y[1]=f?"":r[j][o?"bits":"bytes"][v]):(O=w/(2===t?Math.pow(2,10*v):Math.pow(1e3,v)),o&&i<=(O*=8)&&v<8&&(O/=i,v++),y[0]=Number(O.toFixed(0<v?m:0)),y[0]===i&&v<8&&void 0===x.exponent&&(y[0]=1,v++),y[1]=10===t&&1===v?o?"kb":"kB":r[j][o?"bits":"bytes"][v],f&&(y[1]="jedec"===j?y[1].charAt(0):0<v?y[1].replace(/B$/,""):y[1],n.test(y[1])&&(y[0]=Math.floor(y[0]),y[1]=""))),d&&(y[0]=-y[0]),y[1]=h[y[1]]||y[1],!0===l?y[0]=y[0].toLocaleString():0<l.length?y[0]=y[0].toLocaleString(l,u):0<p.length&&(y[0]=y[0].toString().replace(".",p)),"array"===b?y:(c&&(y[1]=s[v]?s[v]:a[j][v]+(o?"bit":"byte")+(1===y[0]?"":"s")),"object"===b?{value:y[0],symbol:y[1],exponent:v}:y.join(g)))}o.partial=function(e){return function(t){return o(t,e)}},e.exports=o}("undefined"!=typeof window&&window)}).call(this,n(99))},794:function(e,t,n){"use strict";var r,a=n(1),o=n.n(a),i=n(16),c=n(3),s=n(215),l=n(24),u=n(105),d=n(6),b=n(2),m=n(5),f=n(790),p=n(301),g=n(302),j=n(13),h=g.a.div(r||(r=Object(p.a)(["\n  /* The Modal (background) */\n  .modal {\n    display: block;\n    position: fixed; /* Stay in place */\n    z-index: 9999; /* Sit on top */\n    padding-top: 100px; /* Location of the box */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    overflow: auto; /* Enable scroll if needed */\n    background-color: rgb(0, 0, 0); /* Fallback color */\n    background-color: rgba(\n      0,\n      0,\n      0,\n      0.9\n    ); /* Black w/ opacity */\n  }\n\n  /* Modal Content (Image) */\n  .modal-content {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n  }\n\n  /* Caption of Modal Image (Image Text) - Same Width as the Image */\n  #caption {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n    text-align: center;\n    color: #ccc;\n    padding: 10px 0;\n    height: 150px;\n  }\n\n  /* Add Animation - Zoom in the Modal */\n  .modal-content,\n  #caption {\n    animation-name: zoom;\n    animation-duration: 0.6s;\n  }\n\n  @keyframes zoom {\n    from {\n      transform: scale(0);\n    }\n    to {\n      transform: scale(1);\n    }\n  }\n\n  /* The Close Button */\n  .close {\n    position: absolute;\n    top: 15px;\n    right: 35px;\n    color: #f1f1f1;\n    font-size: 40px;\n    font-weight: bold;\n    transition: 0.3s;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: #bbb;\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  /* 100% Image Width on Smaller Screens */\n  @media only screen and (max-width: 700px) {\n    .modal-content {\n      width: 100%;\n    }\n  }\n"])));var x=function(e){return Object(j.jsx)(h,{children:Object(j.jsxs)("div",{className:"modal",children:[Object(j.jsx)("span",{className:"close",onClick:e.onClose,children:"\xd7"}),Object(j.jsx)("img",{className:"modal-content",src:e.src,alt:e.alt})]})})};t.a=function(e){var t=Object(d.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],p=Object(d.useState)(null),g=Object(s.a)(p,2),h=g[0],y=g[1],O=Object(d.useRef)(),v=Object(d.useState)(null),w=Object(s.a)(v,2),k=w[0],N=w[1],S=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]},B=function(){var t=Object(c.a)(o.a.mark((function t(n){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(r=n.target.files)&&r.length){t.next=4;break}return t.abrupt("return");case 4:return c=r[0],f.a.validate(c,{storage:e.storage,image:!0}),a(!0),t.next=9,f.a.upload(c,{storage:e.storage,image:!0});case 9:c=t.sent,O.current.value="",a(!1),e.onChange([].concat(Object(i.a)(S()),[c])),t.next=21;break;case 15:t.prev=15,t.t0=t.catch(0),O.current.value="",console.error(t.t0),a(!1),m.a.showMessage(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),C=e.max,T=e.readonly,M=Object(j.jsxs)("label",{className:"".concat(r?"opacity-50 cursor-default":"cursor-pointer"," inline-block mt-2 mb-2 text-sm px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100"),children:[Object(j.jsx)(u.a,{className:"mr-2",icon:l.m}),Object(b.d)("fileUploader.upload"),Object(j.jsx)("input",{style:{display:"none"},disabled:r||T,accept:"image/*",type:"file",onChange:B,ref:O})]});return Object(j.jsxs)("div",{children:[T||C&&S().map((function(e){return{uid:e.id||void 0,name:e.name,status:"done",url:e.downloadUrl}})).length>=C?null:M,S()&&S().length?Object(j.jsx)("div",{className:"mt-2 flex flex-row flex-wrap",children:S().map((function(t){return Object(j.jsxs)("div",{className:"mr-2 mb-2 rounded-md",style:{height:"100px"},onMouseEnter:function(){return N(t.id)},onMouseLeave:function(){return N(null)},children:[Object(j.jsx)("img",{alt:t.name,src:t.downloadUrl,className:"rounded-md",style:{width:"100px",height:"100px",objectFit:"cover"}}),Object(j.jsxs)("div",{className:"relative rounded-b-md text-center",style:{display:k===t.id?"block":"none",bottom:"1.5rem",width:"100px",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:[Object(j.jsx)("button",{type:"button",className:"text-white",onClick:function(){return function(e){y({src:e.downloadUrl,alt:e.name})}(t)},children:Object(j.jsx)(u.a,{icon:l.n})}),!T&&Object(j.jsx)("button",{type:"button",className:"text-white ml-2",onClick:function(){return n=t.id,void e.onChange(S().filter((function(e){return e.id!==n})));var n},children:Object(j.jsx)(u.a,{icon:l.s})})]})]},t.id)}))}):null,h&&Object(j.jsx)(x,{src:h.src,alt:h.alt,onClose:function(){y(null)}})]})}},801:function(e,t,n){"use strict";var r=n(6),a=n(794),o=n(701),i=n(706),c=n(13);function s(e){var t=e.label,n=e.name,s=e.hint,l=e.storage,u=e.max,d=e.required,b=e.externalErrorMessage,m=Object(o.d)(),f=m.errors,p=m.formState,g=p.touched,j=p.isSubmitted,h=m.setValue,x=m.watch,y=m.register;Object(r.useEffect)((function(){y({name:n})}),[y,n]);var O=i.a.errorMessage(n,f,g,j,b);return Object(c.jsxs)("div",{children:[Boolean(t)&&Object(c.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",children:[t," ",d?Object(c.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(c.jsx)(a.a,{storage:l,value:x(n),onChange:function(t){h(n,t,{shouldValidate:!0}),e.onChange&&e.onChange(t)},max:u}),Object(c.jsx)("div",{className:"text-red-600 text-sm mt-2",children:O}),Boolean(s)&&Object(c.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:s})]})}s.defaultProps={max:void 0,required:!1},t.a=s},837:function(e,t,n){"use strict";var r=n(0),a=n(215),o=n(702),i=n(24),c=n(105),s=n(705),l=n(6),u=n(701),d=n(2),b=n(704),m=n(703),f=n(311),p=n(801),g=n(731),j=n(35),h=n(13),x=j.e().shape({name:b.a.string(Object(d.d)("entities.petTypes.fields.name"),{}),image:b.a.images(Object(d.d)("entities.petTypes.fields.image"),{}),language:b.a.relationToOne(Object(d.d)("entities.petTypes.fields.language"),{})});t.a=function(e){var t=e.saveLoading,n=Object(l.useState)((function(){var t=e.record||{};return{name:t.name,image:t.image||[],language:t.language}})),b=Object(a.a)(n,1)[0],j=Object(u.c)({resolver:Object(s.yupResolver)(x),mode:"all",defaultValues:b}),y=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return Object(h.jsx)(u.a,Object(r.a)(Object(r.a)({},j),{},{children:Object(h.jsxs)("form",{onSubmit:j.handleSubmit(y),children:[Object(h.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md",children:Object(h.jsx)(m.a,{name:"name",label:Object(d.d)("entities.petTypes.fields.name"),required:!1,autoFocus:!0})}),Object(h.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(h.jsx)(p.a,{name:"image",label:Object(d.d)("entities.petTypes.fields.image"),required:!1,storage:f.a.values.petTypesImage,max:void 0})}),Object(h.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(h.jsx)(g.a,{name:"language",label:Object(d.d)("entities.petTypes.fields.language"),required:!1,showCreate:!e.modal})}),Object(h.jsxs)("div",{className:"pt-4",children:[Object(h.jsxs)("button",{className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",disabled:t,type:"button",onClick:j.handleSubmit(y),children:[Object(h.jsx)(c.a,{className:"mr-2",icon:o.e}),Object(d.d)("common.save")]}),Object(h.jsxs)("button",{disabled:t,onClick:function(){Object.keys(b).forEach((function(e){j.setValue(e,b[e])}))},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(h.jsx)(c.a,{className:"mr-2",icon:i.t}),Object(d.d)("common.reset")]}),e.onCancel?Object(h.jsxs)("button",{disabled:t,onClick:function(){return e.onCancel()},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(h.jsx)(c.a,{className:"mr-2",icon:i.s}),Object(d.d)("common.cancel")]}):null]})]})}))}}}]);