(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[26],{1056:function(e,t,r){"use strict";r.r(t);var n=r(215),a=r(6),i=r(30),c=r(32),o=r(2),s=r(137),d=r(4),l=function(e){return e.discounts.form},u=Object(d.a)([l],(function(e){return e.record})),m={selectInitLoading:Object(d.a)([l],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:Object(d.a)([l],(function(e){return Boolean(e.saveLoading)})),selectRecord:u,selectRaw:l},b=r(7),f=r(855),j=r(708),x=r(712),g=r(13);t.default=function(e){var t=Object(a.useState)(!1),r=Object(n.a)(t,2),d=r[0],l=r[1],u=Object(i.d)(),O=Object(c.h)(),h=Object(i.e)(m.selectInitLoading),v=Object(i.e)(m.selectSaveLoading),p=Object(i.e)(m.selectRecord),y=Boolean(O.params.id),k=y?Object(o.d)("entities.discounts.edit.title"):Object(o.d)("entities.discounts.new.title");return Object(a.useEffect)((function(){u(s.a.doInit(O.params.id)),l(!0)}),[u,O.params.id]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(j.a,{items:[[Object(o.d)("dashboard.menu"),"/network"],[Object(o.d)("entities.discounts.menu"),"/discounts"],[k]]}),Object(g.jsxs)("div",{className:"mt-4 p-6 bg-white dark:bg-gray-800 dark:border-gray-800 text-gray-900 dark:text-gray-200 border-gray-200 border rounded-md",children:[Object(g.jsx)("h1",{className:"text-lg font-medium mb-6",children:k}),h&&Object(g.jsx)(x.a,{}),d&&!h&&Object(g.jsx)(f.a,{saveLoading:v,initLoading:h,record:p,isEditing:y,onSubmit:function(e,t){u(y?s.a.doUpdate(e,t):s.a.doCreate(t))},onCancel:function(){return Object(b.b)().push("/discounts")}})]})]})}},703:function(e,t,r){"use strict";var n=r(215),a=r(6),i=r(701),c=r(706),o=r(692),s=r(13);function d(e){var t=Object(a.useState)(Object(o.a)()),r=Object(n.a)(t,1)[0],d=e.label,l=e.name,u=e.hint,m=e.type,b=e.placeholder,f=e.autoFocus,j=e.autoComplete,x=e.required,g=e.externalErrorMessage,O=e.disabled,h=e.endAdornment,v=Object(i.d)(),p=v.register,y=v.errors,k=v.formState,w=k.touched,N=k.isSubmitted,q=c.a.errorMessage(l,y,w,N,g);return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[Boolean(d)&&Object(s.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",htmlFor:r,children:[d," ",x?Object(s.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(s.jsxs)("div",{className:"flex flex-nowrap items-baseline",children:[Object(s.jsx)("input",{id:r,name:l,type:m,ref:p,onChange:function(t){e.onChange&&e.onChange(t.target.value)},onBlur:function(t){e.onBlur&&e.onBlur(t)},placeholder:b||void 0,autoFocus:f||void 0,autoComplete:j||void 0,disabled:O,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring ".concat(q?"border-red-400 text-red-600":"")}),h&&Object(s.jsx)("span",{className:"ml-2 text-gray-700",children:h})]})]}),Object(s.jsx)("div",{className:"text-red-600 text-sm mt-2",children:q}),Boolean(u)&&Object(s.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:u})]})}d.defaultProps={type:"text",required:!1},t.a=d},704:function(e,t,r){"use strict";var n=r(16),a=r(35),i=r(2),c=r(36),o=r.n(c),s={generic:function(e){return a.c().label(e)},string:function(e,t){t=t||{};var r=a.h().transform((function(e,t){return""===t?null:e})).nullable(!0).trim().label(e);return t.required&&(r=r.required()),(t.min||0===t.min)&&(r=r.min(t.min)),t.max&&(r=r.max(t.max)),t.matches&&(r=r.matches(t.matches)),r},boolean:function(e,t){return a.b().default(!1).label(e)},relationToOne:function(e,t){t=t||{};var r=a.c().nullable(!0).label(e).transform((function(e,t){return t?t.id:null}));return t.required&&(r=r.required()),r},stringArray:function(e,t){t=t||{};var r=a.a().compact().ensure().of(a.h().transform((function(e,t){return""===t?null:e})).trim()).label(e);return(t.required||t.min)&&(r=r.required()),t.min||0===t.min?r=r.min(t.min):t.required&&(r=r.min(1)),t.max&&(r=r.max(t.max)),r},relationToMany:function(e,t){t=t||{};var r=a.a().nullable(!0).label(e).transform((function(e,t){return t&&t.length?t.map((function(e){return e.id})):[]}));return(t.required||t.min)&&(r=r.required()),t.min||0===t.min?r=r.min(t.min):t.required&&(r=r.min(1)),t.max&&(r=r.max(t.max)),r},integer:function(e,t){t=t||{};var r=a.d().transform((function(e,t){return""===t?null:e})).integer().nullable(!0).label(e);return t.required&&(r=r.required()),(t.min||0===t.min)&&(r=r.min(t.min)),t.max&&(r=r.max(t.max)),r},images:function(e,t){t=t||{};var r=a.a().nullable(!0).label(e);return(t.required||t.min)&&(r=r.required()),t.min||0===t.min?r=r.min(t.min):t.required&&(r=r.min(1)),t.max&&(r=r.max(t.max)),r},files:function(e,t){t=t||{};var r=a.a().compact().ensure().nullable(!0).label(e);return(t.required||t.min)&&(r=r.required()),t.min||0===t.min?r=r.min(t.min):t.required&&(r=r.min(1)),t.max&&(r=r.max(t.max)),r},enumerator:function(e,t){t=t||{};var r=a.h().transform((function(e,t){return""===t?null:e})).label(e).nullable(!0).oneOf([null].concat(Object(n.a)(t.options||[])));return t.required&&(r=r.required(Object(i.d)("validation.string.selected"))),r},email:function(e,t){t=t||{};var r=a.h().transform((function(e,t){return""===t?null:e})).nullable(!0).trim().label(e).email();return t.required&&(r=r.required()),(t.min||0===t.min)&&(r=r.min(t.min)),t.max&&(r=r.max(t.max)),t.matches&&(r=r.matches(t.matches)),r},decimal:function(e,t){t=t||{};var r=a.d().transform((function(e,t){return""===t?null:e})).nullable(!0).label(e);return t.required&&(r=r.required()),(t.min||0===t.min)&&(r=r.min(t.min)),t.max&&(r=r.max(t.max)),r},datetime:function(e,t){t=t||{};var r=a.c().nullable(!0).label(e).transform((function(e,t){return e?o()(t,"YYYY-MM-DD HH:mm").toISOString():null}));return t.required&&(r=r.required()),r},date:function(e,t){t=t||{};var r=a.c().nullable(!0).label(e).test("is-date",Object(i.d)("validation.mixed.default"),(function(e){return!e||o()(e,"YYYY-MM-DD").isValid()})).transform((function(e){return e?o()(e).format("YYYY-MM-DD"):null}));return t.required&&(r=r.required()),r}};t.a=s},706:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(14),a=r(15),i=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"errorMessage",value:function(e,t,r,n){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(i)return i;if(!n&&!r[e])return null;var c=t[e];return(null===c||void 0===c||null===(a=c[0])||void 0===a?void 0:a.message)||(null===c||void 0===c?void 0:c.message)||c||null}}]),e}()},708:function(e,t,r){"use strict";var n=r(24),a=r(105),i=(r(6),r(110)),c=r(13);t.a=function(e){var t=function(e){return e.length>1};return Object(c.jsx)("ol",{className:"text-sm flex items-center",children:e.items.map((function(r,o){var s=0===o,d=e.items.length-1===o;return Object(c.jsxs)("li",{className:"".concat(d?"text-gray-800 dark:text-white":"text-gray-500 dark:text-gray-200 mr-2"),children:[!s&&Object(c.jsx)(a.a,{className:"mr-2 font-normal text-gray-400 dark:text-gray-200",icon:n.d}),t(r)?Object(c.jsx)(i.a,{className:"hover:underline",to:r[1],children:r[0]}):r[0]]},r[0])}))})}},712:function(e,t,r){"use strict";r(6);var n=r(13);t.a=function(){return Object(n.jsx)("div",{className:"w-full flex justify-center items-center mt-12 mb-12",children:Object(n.jsx)("div",{className:"spinner"})})}},800:function(e,t,r){"use strict";var n=r(215),a=r(6),i=r(701),c=r(706),o=r(216),s=r.n(o),d=r(692),l=r(13);function u(e){var t=Object(a.useState)(Object(d.a)()),r=Object(n.a)(t,1)[0],o=e.label,u=e.name,m=e.hint,b=e.placeholder,f=e.autoFocus,j=e.externalErrorMessage,x=e.required,g=e.showTimeInput,O=Object(i.d)(),h=O.register,v=O.errors,p=O.formState,y=p.touched,k=p.isSubmitted,w=O.setValue,N=O.watch;Object(a.useEffect)((function(){h({name:u})}),[h,u]);var q=c.a.errorMessage(u,v,y,k,j);return Object(l.jsxs)("div",{className:"form-group",children:[Boolean(o)&&Object(l.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",htmlFor:r,children:[o," ",x?Object(l.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(l.jsx)("div",{children:Object(l.jsx)(s.a,{id:r,name:u,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring ".concat(q?"border-red-400 text-red-600":""),onChange:function(t){w(u,t,{shouldValidate:!0}),e.onChange&&e.onChange(t)},onBlur:function(t){e.onBlur&&e.onBlur(t)},selected:N(u),showTimeInput:g,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1}},placeholderText:b||"",autoFocus:f||void 0,autoComplete:"off",dateFormat:g?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15})}),Object(l.jsx)("div",{className:"text-red-600 text-sm mt-2",children:q}),Boolean(m)&&Object(l.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:m})]})}u.defaultProps={required:!1},t.a=u},855:function(e,t,r){"use strict";var n=r(0),a=r(215),i=r(702),c=r(24),o=r(105),s=r(705),d=r(6),l=r(701),u=r(2),m=r(704),b=r(703),f=r(36),j=r.n(f),x=r(800),g=r(35),O=r(13),h=g.e().shape({codeName:m.a.string(Object(u.d)("entities.discounts.fields.codeName"),{required:!0}),discountPercentage:m.a.decimal(Object(u.d)("entities.discounts.fields.discountPercentage"),{min:.01}),expirationDate:m.a.date(Object(u.d)("entities.discounts.fields.expirationDate"),{})});t.a=function(e){var t=e.saveLoading,r=Object(d.useState)((function(){var t=e.record||{};return{codeName:t.codeName,discountPercentage:t.discountPercentage,expirationDate:t.expirationDate?j()(t.expirationDate,"YYYY-MM-DD").toDate():null}})),m=Object(a.a)(r,1)[0],f=Object(l.c)({resolver:Object(s.yupResolver)(h),mode:"all",defaultValues:m}),g=function(t){var r;e.onSubmit(null===(r=e.record)||void 0===r?void 0:r.id,t)};return Object(O.jsx)(l.a,Object(n.a)(Object(n.a)({},f),{},{children:Object(O.jsxs)("form",{onSubmit:f.handleSubmit(g),children:[Object(O.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md",children:Object(O.jsx)(b.a,{name:"codeName",label:Object(u.d)("entities.discounts.fields.codeName"),required:!0,autoFocus:!0})}),Object(O.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(O.jsx)(b.a,{name:"discountPercentage",label:Object(u.d)("entities.discounts.fields.discountPercentage"),required:!1})}),Object(O.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(O.jsx)(x.a,{name:"expirationDate",label:Object(u.d)("entities.discounts.fields.expirationDate"),required:!1})}),Object(O.jsxs)("div",{className:"pt-4",children:[Object(O.jsxs)("button",{className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",disabled:t,type:"button",onClick:f.handleSubmit(g),children:[Object(O.jsx)(o.a,{className:"mr-2",icon:i.e}),Object(u.d)("common.save")]}),Object(O.jsxs)("button",{disabled:t,onClick:function(){Object.keys(m).forEach((function(e){f.setValue(e,m[e])}))},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(O.jsx)(o.a,{className:"mr-2",icon:c.t}),Object(u.d)("common.reset")]}),e.onCancel?Object(O.jsxs)("button",{disabled:t,onClick:function(){return e.onCancel()},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(O.jsx)(o.a,{className:"mr-2",icon:c.s}),Object(u.d)("common.cancel")]}):null]})]})}))}}}]);