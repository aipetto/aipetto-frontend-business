(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[11],{568:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},569:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},570:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(207);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},571:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(579),a=n.n(r),o=n(586);function s(e,t){return!t||"object"!==a()(t)&&"function"!==typeof t?Object(o.a)(e):t}},572:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},578:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},579:function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},586:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},587:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(135),a=n(1),o=n.n(a),s=n(3),c=n(11),i=n(12),l=n(588),u=n.n(l),d=n(2),b=n(10),m=n(672),f=n(9),j=n(204),p=n.n(j),g=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"validate",value:function(e,t){if(t){if(t.image&&!e.type.startsWith("image"))throw new Error(Object(d.d)("fileUploader.image"));if(t.storage.maxSizeInBytes&&e.size>t.storage.maxSizeInBytes)throw new Error(Object(d.d)("fileUploader.size",u()(t.storage.maxSizeInBytes)));var n=h(e.name);if(t.formats&&!t.formats.includes(n))throw new Error(Object(d.d)("fileUploader.formats",t.formats.join(", ")))}}},{key:"upload",value:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,s,c,i,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.validate(t,n),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 7:return r=h(t.name),a=Object(m.a)(),s="".concat(a,".").concat(r),e.next=12,this.fetchFileCredentials(s,n);case 12:return c=e.sent,i=c.uploadCredentials,l=c.downloadUrl,u=c.privateUrl,e.next=18,this.uploadToServer(t,i);case 18:return e.abrupt("return",{id:a,name:t.name,sizeInBytes:t.size,publicUrl:i&&i.publicUrl?i.publicUrl:null,privateUrl:u,downloadUrl:l,new:!0});case 19:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchFileCredentials",value:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.a.get(),e.next=3,b.a.get("/tenant/".concat(r,"/file/credentials"),{params:{filename:t,storageId:n.storage.id}});case 3:return a=e.sent,s=a.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"uploadToServer",value:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var a,s,c,i,l,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,a=n.url,s=new FormData,c=0,i=Object.entries(n.fields||{});c<i.length;c++)l=Object(r.a)(i[c],2),u=l[0],d=l[1],s.append(u,d);return s.append("file",t),e.abrupt("return",p.a.post(a,s,{headers:{"Content-Type":"multipart/form-data"}}));case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function h(e){if(!e)return null;var t=/(?:\.([^.]+))?$/.exec(e);return t?t[1]:null}},588:function(e,t,n){"use strict";(function(t){!function(t){var n=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},a={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function o(e){var t,o,s,c,i,l,u,d,b,m,f,j,p,g,h,x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},O=[],v=0,y=void 0,w=void 0;if(isNaN(e))throw new TypeError("Invalid number");return o=!0===x.bits,f=!0===x.unix,t=x.base||2,m=void 0!==x.round?x.round:f?1:2,l=void 0!==x.locale?x.locale:"",u=x.localeOptions||{},j=void 0!==x.separator?x.separator:"",p=void 0!==x.spacer?x.spacer:f?"":" ",h=x.symbols||{},g=2===t&&x.standard||"jedec",b=x.output||"string",c=!0===x.fullform,i=x.fullforms instanceof Array?x.fullforms:[],y=void 0!==x.exponent?x.exponent:-1,s=2<t?1e3:1024,(d=(w=Number(e))<0)&&(w=-w),(-1===y||isNaN(y))&&(y=Math.floor(Math.log(w)/Math.log(s)))<0&&(y=0),8<y&&(y=8),"exponent"===b?y:(0===w?(O[0]=0,O[1]=f?"":r[g][o?"bits":"bytes"][y]):(v=w/(2===t?Math.pow(2,10*y):Math.pow(1e3,y)),o&&s<=(v*=8)&&y<8&&(v/=s,y++),O[0]=Number(v.toFixed(0<y?m:0)),O[0]===s&&y<8&&void 0===x.exponent&&(O[0]=1,y++),O[1]=10===t&&1===y?o?"kb":"kB":r[g][o?"bits":"bytes"][y],f&&(O[1]="jedec"===g?O[1].charAt(0):0<y?O[1].replace(/B$/,""):O[1],n.test(O[1])&&(O[0]=Math.floor(O[0]),O[1]=""))),d&&(O[0]=-O[0]),O[1]=h[O[1]]||O[1],!0===l?O[0]=O[0].toLocaleString():0<l.length?O[0]=O[0].toLocaleString(l,u):0<j.length&&(O[0]=O[0].toString().replace(".",j)),"array"===b?O:(c&&(O[1]=i[y]?i[y]:a[g][y]+(o?"bit":"byte")+(1===O[0]?"":"s")),"object"===b?{value:O[0],symbol:O[1],exponent:y}:O.join(p)))}o.partial=function(e){return function(t){return o(t,e)}},e.exports=o}("undefined"!=typeof window&&window)}).call(this,n(65))},607:function(e,t,n){"use strict";var r,a=n(1),o=n.n(a),s=n(19),c=n(3),i=n(135),l=n(25),u=n(71),d=n(4),b=n(2),m=n(6),f=n(587),j=n(202),p=n(203),g=n(7),h=p.a.div(r||(r=Object(j.a)(["\n  /* The Modal (background) */\n  .modal {\n    display: block;\n    position: fixed; /* Stay in place */\n    z-index: 9999; /* Sit on top */\n    padding-top: 100px; /* Location of the box */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    overflow: auto; /* Enable scroll if needed */\n    background-color: rgb(0, 0, 0); /* Fallback color */\n    background-color: rgba(\n      0,\n      0,\n      0,\n      0.9\n    ); /* Black w/ opacity */\n  }\n\n  /* Modal Content (Image) */\n  .modal-content {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n  }\n\n  /* Caption of Modal Image (Image Text) - Same Width as the Image */\n  #caption {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n    text-align: center;\n    color: #ccc;\n    padding: 10px 0;\n    height: 150px;\n  }\n\n  /* Add Animation - Zoom in the Modal */\n  .modal-content,\n  #caption {\n    animation-name: zoom;\n    animation-duration: 0.6s;\n  }\n\n  @keyframes zoom {\n    from {\n      transform: scale(0);\n    }\n    to {\n      transform: scale(1);\n    }\n  }\n\n  /* The Close Button */\n  .close {\n    position: absolute;\n    top: 15px;\n    right: 35px;\n    color: #f1f1f1;\n    font-size: 40px;\n    font-weight: bold;\n    transition: 0.3s;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: #bbb;\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  /* 100% Image Width on Smaller Screens */\n  @media only screen and (max-width: 700px) {\n    .modal-content {\n      width: 100%;\n    }\n  }\n"])));var x=function(e){return Object(g.jsx)(h,{children:Object(g.jsxs)("div",{className:"modal",children:[Object(g.jsx)("span",{className:"close",onClick:e.onClose,children:"\xd7"}),Object(g.jsx)("img",{className:"modal-content",src:e.src,alt:e.alt})]})})};t.a=function(e){var t=Object(d.useState)(!1),n=Object(i.a)(t,2),r=n[0],a=n[1],j=Object(d.useState)(null),p=Object(i.a)(j,2),h=p[0],O=p[1],v=Object(d.useRef)(),y=Object(d.useState)(null),w=Object(i.a)(y,2),k=w[0],C=w[1],N=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]},S=function(){var t=Object(c.a)(o.a.mark((function t(n){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(r=n.target.files)&&r.length){t.next=4;break}return t.abrupt("return");case 4:return c=r[0],f.a.validate(c,{storage:e.storage,image:!0}),a(!0),t.next=9,f.a.upload(c,{storage:e.storage,image:!0});case 9:c=t.sent,v.current.value="",a(!1),e.onChange([].concat(Object(s.a)(N()),[c])),t.next=21;break;case 15:t.prev=15,t.t0=t.catch(0),v.current.value="",console.error(t.t0),a(!1),m.a.showMessage(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),P=e.max,B=e.readonly,T=Object(g.jsxs)("label",{className:"".concat(r?"opacity-50 cursor-default":"cursor-pointer"," inline-block mt-2 mb-2 text-sm px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100"),children:[Object(g.jsx)(u.a,{className:"mr-2",icon:l.m}),Object(b.d)("fileUploader.upload"),Object(g.jsx)("input",{style:{display:"none"},disabled:r||B,accept:"image/*",type:"file",onChange:S,ref:v})]});return Object(g.jsxs)("div",{children:[B||P&&N().map((function(e){return{uid:e.id||void 0,name:e.name,status:"done",url:e.downloadUrl}})).length>=P?null:T,N()&&N().length?Object(g.jsx)("div",{className:"mt-2 flex flex-row flex-wrap",children:N().map((function(t){return Object(g.jsxs)("div",{className:"mr-2 mb-2 rounded-md",style:{height:"100px"},onMouseEnter:function(){return C(t.id)},onMouseLeave:function(){return C(null)},children:[Object(g.jsx)("img",{alt:t.name,src:t.downloadUrl,className:"rounded-md",style:{width:"100px",height:"100px",objectFit:"cover"}}),Object(g.jsxs)("div",{className:"relative rounded-b-md text-center",style:{display:k===t.id?"block":"none",bottom:"1.5rem",width:"100px",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:[Object(g.jsx)("button",{type:"button",className:"text-white",onClick:function(){return function(e){O({src:e.downloadUrl,alt:e.name})}(t)},children:Object(g.jsx)(u.a,{icon:l.n})}),!B&&Object(g.jsx)("button",{type:"button",className:"text-white ml-2",onClick:function(){return n=t.id,void e.onChange(N().filter((function(e){return e.id!==n})));var n},children:Object(g.jsx)(u.a,{icon:l.s})})]})]},t.id)}))}):null,h&&Object(g.jsx)(x,{src:h.src,alt:h.alt,onClose:function(){O(null)}})]})}},608:function(e,t,n){"use strict";var r=n(5),a=n(31),o=n(50),s=n(130),c=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.userRead)})),i=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.userEdit)})),l=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.userDestroy)})),u={selectPermissionToRead:c,selectPermissionToEdit:i,selectPermissionToCreate:Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.userCreate)})),selectPermissionToImport:Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.userImport)})),selectPermissionToDestroy:l};t.a=u},621:function(e,t,n){"use strict";var r=n(5),a=n(31),o=n(50),s=n(130),c=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.customerRead)})),i=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.customerEdit)})),l=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.customerCreate)})),u=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.customerImport)})),d={selectPermissionToRead:c,selectPermissionToEdit:i,selectPermissionToCreate:l,selectPermissionToDestroy:Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.customerDestroy)})),selectPermissionToImport:u};t.a=d},625:function(e,t,n){"use strict";var r=n(206),a={status:["active","invited","empty-permissions"],roles:Object.keys(r.a.values)};t.a=a},630:function(e,t,n){"use strict";var r=n(4),a=n(607),o=n(556),s=n(557),c=n(7);function i(e){var t=e.label,n=e.name,i=e.hint,l=e.storage,u=e.max,d=e.required,b=e.externalErrorMessage,m=Object(o.d)(),f=m.errors,j=m.formState,p=j.touched,g=j.isSubmitted,h=m.setValue,x=m.watch,O=m.register;Object(r.useEffect)((function(){O({name:n})}),[O,n]);var v=s.a.errorMessage(n,f,p,g,b);return Object(c.jsxs)("div",{children:[Boolean(t)&&Object(c.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",children:[t," ",d?Object(c.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(c.jsx)(a.a,{storage:l,value:x(n),onChange:function(t){h(n,t,{shouldValidate:!0}),e.onChange&&e.onChange(t)},max:u}),Object(c.jsx)("div",{className:"text-red-600 text-sm mt-2",children:v}),Boolean(i)&&Object(c.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:i})]})}i.defaultProps={max:void 0,required:!1},t.a=i},635:function(e,t,n){"use strict";var r=n(135),a=n(4),o=n.n(a),s=(n(597),n(24)),c=(n(598),n(596)),i=n(578),l=n(568),u=n(569),d=(n(20),n(570)),b=n(571),m=n(572),f=(n(576),n(112),n(579),n(577)),j=n(567),p=(n(565),n(599),n(584),n(600));function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=String(e).toLowerCase(),r=String(t.value).toLowerCase(),a=String(t.label).toLowerCase();return r===n||a===n},O=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n){return!(!e||t.some((function(t){return x(e,t)}))||n.some((function(t){return x(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),v=function(e){var t,n;return n=t=function(t){Object(d.a)(r,t);var n=g(r);function r(e){var t;Object(l.a)(this,r),(t=n.call(this,e)).select=void 0,t.onChange=function(e,n){var r=t.props,a=r.getNewOptionData,o=r.inputValue,s=r.isMulti,i=r.onChange,l=r.onCreateOption,u=r.value,d=r.name;if("select-option"!==n.action)return i(e,n);var b=t.state.newOption,m=Array.isArray(e)?e:[e];if(m[m.length-1]!==b)i(e,n);else if(l)l(o);else{var j=a(o,o),p={action:"create-option",name:d};i(s?[].concat(Object(c.a)(Object(f.b)(u)),[j]):j,p)}};var a=e.options||[];return t.state={newOption:void 0,options:a},t}return Object(u.a)(r,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,n=e.createOptionPosition,r=e.formatCreateLabel,a=e.getNewOptionData,o=e.inputValue,s=e.isLoading,i=e.isValidNewOption,l=e.value,u=e.options||[],d=this.state.newOption;d=i(o,Object(f.b)(l),u)?a(o,r(o)):void 0,this.setState({newOption:d,options:!t&&s||!d?u:"first"===n?[d].concat(Object(c.a)(u)):[].concat(Object(c.a)(u),[d])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var t=this,n=this.state.options;return o.a.createElement(e,Object(s.a)({},this.props,{ref:function(e){t.select=e},options:n,onChange:this.onChange}))}}]),r}(a.Component),t.defaultProps=O,n}(j.a),y=Object(p.a)(v),w=n(2),k=n(556),C=n(557),N=n(27),S=n(77),P=n(575),B=n(672),T=n(7);function M(e){var t=Object(a.useState)(Object(B.a)()),n=Object(r.a)(t,1)[0],o=e.label,s=e.name,c=e.hint,i=e.externalErrorMessage,l=e.required,u=e.placeholder,d=e.isClearable,b=e.notFoundContent,m=Object(k.d)(),f=m.register,j=m.errors,p=m.formState,g=p.touched,h=p.isSubmitted,x=m.setValue,O=m.watch,v=Object(N.e)(S.a.selectDarkMode),M=C.a.errorMessage(s,j,g,h,i);Object(a.useEffect)((function(){f({name:s})}),[f,s]);var E=O(s),U=Object(P.a)(v,Boolean(M));return Object(T.jsxs)("div",{children:[Boolean(o)&&Object(T.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",htmlFor:n,children:[o," ",l?Object(T.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(T.jsx)(y,{className:"w-full mt-2",value:E&&E.length?E.map((function(e){return{value:e,label:e}})):[],onChange:function(t){if(!t||!t.length)return x(s,null,{shouldValidate:!0}),void(e.onChange&&e.onChange(null));var n=t.map((function(e){return e.value})).join(",").split(",");x(s,n,{shouldValidate:!0}),e.onChange&&e.onChange(n)},onBlur:function(t){e.onBlur&&e.onBlur(t)},id:n,name:s,placeholder:u||"",isClearable:d,styles:U,isMulti:!0,formatCreateLabel:function(e){return e},loadingMessage:function(){return Object(w.d)("autocomplete.loading")},noOptionsMessage:function(){return b||""}}),Object(T.jsx)("div",{className:"text-red-600 text-sm mt-2",children:M}),Boolean(c)&&Object(T.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:c})]})}M.defaultProps={required:!1,isClearable:!0};t.a=M},636:function(e,t,n){"use strict";var r=n(0),a=n(135),o=n(560),s=n(25),c=n(71),i=n(566),l=n(4),u=n(556),d=n(2),b=n(564),m=n(625),f=n(561),j=n(593),p=n(635),g=n(33),h=n(7),x=g.e().shape({email:b.a.email(Object(d.d)("user.fields.email")),roles:b.a.stringArray(Object(d.d)("user.fields.roles"),{required:!0,min:1})}),O=g.e().shape({emails:g.a().label(Object(d.d)("user.fields.emails")).of(g.h().transform((function(e,t){return""===t?null:e})).email(Object(d.d)("user.validations.email")).label(Object(d.d)("user.fields.email")).max(255).required()).required().min(1),roles:b.a.stringArray(Object(d.d)("user.fields.roles"),{required:!0,min:1})});t.a=function(e){var t=e.single,n=e.saveLoading,b=e.single?x:O,g=Object(l.useState)((function(){return{emails:[],email:"",roles:[]}})),v=Object(a.a)(g,1)[0],y=Object(u.c)({resolver:Object(i.yupResolver)(b),mode:"all",defaultValues:v}),w=function(t){var n=Object.assign({},t);n.email&&(n.emails=[n.email],delete n.email),e.onSubmit(null,n)};return Object(h.jsx)(u.a,Object(r.a)(Object(r.a)({},y),{},{children:Object(h.jsxs)("form",{onSubmit:y.handleSubmit(w),children:[Object(h.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md",children:t?Object(h.jsx)(f.a,{name:"email",label:Object(d.d)("user.fields.email"),required:!0,autoFocus:!0}):Object(h.jsx)(p.a,{name:"emails",label:Object(d.d)("user.fields.emails"),notFoundContent:Object(d.d)("user.new.emailsHint"),required:!0})}),Object(h.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(h.jsx)(j.a,{name:"roles",label:Object(d.d)("user.fields.roles"),required:!0,options:m.a.roles.map((function(e){return{value:e,label:Object(d.d)("roles.".concat(e,".label"))}})),mode:"multiple"})}),Object(h.jsxs)("div",{className:"pt-4",children:[Object(h.jsxs)("button",{className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",disabled:n,type:"button",onClick:y.handleSubmit(w),children:[Object(h.jsx)(c.a,{className:"mr-2",icon:o.e}),Object(d.d)("common.save")]}),Object(h.jsxs)("button",{disabled:n,onClick:function(){Object.keys(v).forEach((function(e){y.setValue(e,v[e])}))},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(h.jsx)(c.a,{className:"mr-2",icon:s.t}),Object(d.d)("common.reset")]}),e.onCancel?Object(h.jsxs)("button",{disabled:n,onClick:function(){return e.onCancel()},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(h.jsx)(c.a,{className:"mr-2",icon:s.s}),Object(d.d)("common.cancel")]}):null]})]})}))}},637:function(e,t,n){"use strict";var r=n(0),a=n(19),o=n(135),s=n(4),c=n(66),i=n(1),l=n.n(i),u=n(3),d=n(25),b=n(71),m=n(112),f=n.n(m),j=n(2),p=n(6),g=n(636),h=n(7);var x=function(e){var t=Object(s.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=function(){var t=Object(u.a)(l.a.mark((function t(n,r){var o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(!0),t.next=4,c.a.create(r);case 4:return t.next=6,c.a.fetchUsers({email:r.emails[0]},null,1,0);case 6:o=t.sent,s=o.rows,e.onSuccess(s[0]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),p.a.handle(t.t0);case 14:return t.prev=14,a(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,11,14,17]])})));return function(e,n){return t.apply(this,arguments)}}();return f.a.createPortal(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",tabIndex:-1,onClick:e.onClose,children:Object(h.jsx)("div",{className:"relative my-6 mx-auto w-auto",onClick:function(e){return e.stopPropagation()},children:Object(h.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(h.jsxs)("div",{className:"flex items-start justify-between p-5 rounded-t",children:[Object(h.jsx)("div",{className:"text-lg font-semibold",children:Object(j.d)("user.new.titleModal")}),Object(h.jsx)("button",{type:"button",className:"ml-auto bg-transparent border-0 text-gray-900 float-right text-lg leading-none font-semibold outline-none focus:outline-none",onClick:e.onClose,children:Object(h.jsx)("span",{className:"bg-transparent text-gray-700 h-6 w-6 text-lg block outline-none focus:outline-none",children:Object(h.jsx)(b.a,{icon:d.s})})})]}),Object(h.jsx)("div",{className:"relative p-6 flex-auto",children:Object(h.jsx)(g.a,{saveLoading:r,onSubmit:i,onCancel:e.onClose,modal:!0,single:!0})})]})})}),Object(h.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}),document.getElementById("modal-root"))},O=n(581),v=n(556),y=n(27),w=n(608);t.a=function(e){var t=Object(v.d)(),n=t.setValue,i=t.getValues,l=Object(s.useState)(!1),u=Object(o.a)(l,2),d=u[0],b=u[1],m=Object(y.e)(w.a.selectPermissionToCreate);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O.a,Object(r.a)(Object(r.a)({},e),{},{fetchFn:function(e,t){return c.a.fetchUserAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;if(e.fullName||e.email){var t=e.email;return e.fullName&&(t="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:t}}return{value:e.id,label:e.label}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){return b(!0)},hasPermissionToCreate:m})),d&&Object(h.jsx)(x,{visible:d,onClose:function(){return b(!1)},onSuccess:function(t){var r=e.name,o=e.mode;n(r,o&&"multiple"===o?[].concat(Object(a.a)(i()[r]||[]),[t]):t),b(!1)}})]})}},652:function(e,t,n){"use strict";var r=n(5),a=n(31),o=n(50),s=n(130),c=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.productRead)})),i=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.productEdit)})),l=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.productCreate)})),u=Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.productImport)})),d={selectPermissionToRead:c,selectPermissionToEdit:i,selectPermissionToCreate:l,selectPermissionToDestroy:Object(r.a)([a.a.selectCurrentTenant,a.a.selectCurrentUser],(function(e,t){return new o.a(e,t).match(s.a.values.productDestroy)})),selectPermissionToImport:u};t.a=d},655:function(e,t,n){"use strict";var r=n(0),a=n(135),o=n(560),s=n(25),c=n(71),i=n(566),l=n(4),u=n(556),d=n(2),b=n(564),m=n(561),f=n(637),j=n(661),p=n(213),g=n(76),h=n.n(g),x=n(656),O=n(33),v=n(7),y=O.e().shape({name:b.a.string(Object(d.d)("entities.customer.fields.name"),{required:!0,min:2,max:255}),birthdate:b.a.date(Object(d.d)("entities.customer.fields.birthdate"),{}),gender:b.a.enumerator(Object(d.d)("entities.customer.fields.gender"),{options:p.a.gender}),userId:b.a.relationToOne(Object(d.d)("entities.customer.fields.userId"),{})});t.a=function(e){var t=e.saveLoading,n=Object(l.useState)((function(){var t=e.record||{};return{name:t.name,birthdate:t.birthdate?h()(t.birthdate,"YYYY-MM-DD").toDate():null,gender:t.gender,userId:t.userId}})),b=Object(a.a)(n,1)[0],g=Object(u.c)({resolver:Object(i.yupResolver)(y),mode:"all",defaultValues:b}),O=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return Object(v.jsx)(u.a,Object(r.a)(Object(r.a)({},g),{},{children:Object(v.jsxs)("form",{onSubmit:g.handleSubmit(O),children:[Object(v.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md",children:Object(v.jsx)(m.a,{name:"name",label:Object(d.d)("entities.customer.fields.name"),required:!0,autoFocus:!0})}),Object(v.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(v.jsx)(x.a,{name:"birthdate",label:Object(d.d)("entities.customer.fields.birthdate"),required:!1})}),Object(v.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(v.jsx)(j.a,{name:"gender",label:Object(d.d)("entities.customer.fields.gender"),options:p.a.gender.map((function(e){return{value:e,label:Object(d.d)("entities.customer.enumerators.gender.".concat(e))}})),required:!1})}),Object(v.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(v.jsx)(f.a,{name:"userId",label:Object(d.d)("entities.customer.fields.userId"),required:!1,showCreate:!e.modal})}),Object(v.jsxs)("div",{className:"pt-4",children:[Object(v.jsxs)("button",{className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",disabled:t,type:"button",onClick:g.handleSubmit(O),children:[Object(v.jsx)(c.a,{className:"mr-2",icon:o.e}),Object(d.d)("common.save")]}),Object(v.jsxs)("button",{disabled:t,onClick:function(){Object.keys(b).forEach((function(e){g.setValue(e,b[e])}))},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(v.jsx)(c.a,{className:"mr-2",icon:s.t}),Object(d.d)("common.reset")]}),e.onCancel?Object(v.jsxs)("button",{disabled:t,onClick:function(){return e.onCancel()},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(v.jsx)(c.a,{className:"mr-2",icon:s.s}),Object(d.d)("common.cancel")]}):null]})]})}))}},662:function(e,t,n){"use strict";var r=n(135),a=n(4),o=n(556),s=n(557),c=n(672),i=n(7);function l(e){var t=Object(a.useState)(Object(c.a)()),n=Object(r.a)(t,1)[0],l=e.label,u=e.name,d=e.hint,b=e.required,m=e.externalErrorMessage,f=Object(o.d)(),j=f.register,p=f.errors,g=f.formState,h=g.touched,x=g.isSubmitted,O=s.a.errorMessage(u,p,h,x,m);return Object(i.jsxs)("div",{children:[Boolean(l)&&Object(i.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",htmlFor:n,children:[l," ",b?Object(i.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(i.jsx)("div",{className:"mt-1",children:Object(i.jsxs)("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[Object(i.jsx)("input",{type:"checkbox",id:n,name:u,ref:j,onChange:function(t){e.onChange&&e.onChange(t.target.checked)},onBlur:function(t){e.onBlur&&e.onBlur(t)},className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),Object(i.jsx)("label",{htmlFor:n,className:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"})]})}),Object(i.jsx)("div",{className:"text-red-600 text-sm mt-2",children:O}),Boolean(d)&&Object(i.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:d})]})}l.defaultProps={},t.a=l},667:function(e,t,n){"use strict";var r=n(0),a=n(19),o=n(135),s=n(4),c=n(52),i=n(1),l=n.n(i),u=n(3),d=n(25),b=n(71),m=n(112),f=n.n(m),j=n(2),p=n(6),g=n(655),h=n(7);var x=function(e){var t=Object(s.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=function(){var t=Object(u.a)(l.a.mark((function t(n,r){var o,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(!0),t.next=4,c.a.create(r);case 4:return o=t.sent,s=o.id,t.next=8,c.a.find(s);case 8:i=t.sent,e.onSuccess(i),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),p.a.handle(t.t0);case 15:return t.prev=15,a(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})));return function(e,n){return t.apply(this,arguments)}}();return f.a.createPortal(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",tabIndex:-1,onClick:e.onClose,children:Object(h.jsx)("div",{className:"relative mx-auto w-auto max-h-screen pt-6 pb-6",onClick:function(e){return e.stopPropagation()},children:Object(h.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(h.jsxs)("div",{className:"flex items-start justify-between p-5 rounded-t",children:[Object(h.jsx)("div",{className:"text-lg font-semibold",children:Object(j.d)("entities.customer.new.title")}),Object(h.jsx)("button",{type:"button",className:"ml-auto bg-transparent border-0 text-gray-900 float-right text-lg leading-none font-semibold outline-none focus:outline-none",onClick:e.onClose,children:Object(h.jsx)("span",{className:"bg-transparent text-gray-700 h-6 w-6 text-lg block outline-none focus:outline-none",children:Object(h.jsx)(b.a,{icon:d.s})})})]}),Object(h.jsx)("div",{className:"relative p-6 flex-auto overflow-y-scroll",children:Object(h.jsx)(g.a,{saveLoading:r,onSubmit:i,onCancel:e.onClose,modal:!0})})]})})}),Object(h.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}),document.getElementById("modal-root"))},O=n(581),v=n(556),y=n(27),w=n(621);t.a=function(e){var t=Object(v.d)(),n=t.setValue,i=t.getValues,l=Object(s.useState)(!1),u=Object(o.a)(l,2),d=u[0],b=u[1],m=Object(y.e)(w.a.selectPermissionToCreate),f=function(){b(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O.a,Object(r.a)(Object(r.a)({},e),{},{fetchFn:function(e,t){return c.a.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.name&&(n=e.name),{key:t,value:t,label:n}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){b(!0)},hasPermissionToCreate:m})),d&&Object(h.jsx)(x,{onClose:f,onSuccess:function(t){var r=e.name,o=e.mode;n(r,o&&"multiple"===o?[].concat(Object(a.a)(i()[r]||[]),[t]):t),f()}})]})}},669:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(19),s=n(3),c=n(135),i=n(25),l=n(71),u=n(4),d=n(2),b=n(6),m=n(587),f=n(7);t.a=function(e){var t=Object(u.useState)(!1),n=Object(c.a)(t,2),r=n[0],j=n[1],p=Object(u.useRef)(),g=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]},h=function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(r=n.target.files)&&r.length){t.next=4;break}return t.abrupt("return");case 4:return s=r[0],m.a.validate(s,{storage:e.storage,formats:e.formats}),j(!0),t.next=9,m.a.upload(s,{storage:e.storage,formats:e.formats});case 9:s=t.sent,p.current.value="",j(!1),e.onChange([].concat(Object(o.a)(g()),[s])),t.next=21;break;case 15:t.prev=15,t.t0=t.catch(0),p.current.value="",console.error(t.t0),j(!1),b.a.showMessage(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),x=e.max,O=e.readonly,v=Object(f.jsxs)("label",{className:"".concat(r?"opacity-50 cursor-default":"cursor-pointer"," inline-block mt-2 mb-2 text-sm px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100"),children:[Object(f.jsx)(l.a,{className:"mr-2",icon:i.m}),Object(d.d)("fileUploader.upload"),Object(f.jsx)("input",{style:{display:"none"},disabled:r||O,accept:function(){var t=e.schema;if(t&&t.formats)return t.formats.map((function(e){return".".concat(e)})).join(",")}(),type:"file",onChange:h,ref:p})]});return Object(f.jsxs)("div",{children:[O||x&&g().map((function(e){return{uid:e.id||void 0,name:e.name,status:"done",url:e.downloadUrl}})).length>=x?null:v,g()&&g().length?Object(f.jsx)("div",{children:g().map((function(t){return Object(f.jsxs)("div",{className:"flex items-center",children:[Object(f.jsx)("div",{className:"flex items-center text-blue-500 dark:text-blue-400 focus:text-blue-400 hover:text-blue-400",children:Object(f.jsxs)("a",{href:t.downloadUrl,target:"_blank",rel:"noopener noreferrer",download:!0,children:[Object(f.jsx)(l.a,{className:"text-sm mr-1",icon:i.h}),t.name]})}),!O&&Object(f.jsx)("button",{type:"button",className:"ml-3",onClick:function(){return n=t.id,void e.onChange(g().filter((function(e){return e.id!==n})));var n},title:Object(d.d)("common.destroy"),children:Object(f.jsx)(l.a,{icon:i.s})})]},t.id)}))}):null]})}},701:function(e,t,n){"use strict";var r=n(0),a=n(135),o=n(560),s=n(25),c=n(71),i=n(566),l=n(4),u=n(556),d=n(2),b=n(564),m=n(561),f=n(557),j=n(672),p=n(7);function g(e){var t=Object(l.useState)(Object(j.a)()),n=Object(a.a)(t,1)[0],r=e.label,o=e.name,s=e.hint,c=e.placeholder,i=e.autoFocus,d=e.autoComplete,b=e.externalErrorMessage,m=e.required,g=Object(u.d)(),h=g.register,x=g.errors,O=g.formState,v=O.touched,y=O.isSubmitted,w=f.a.errorMessage(o,x,v,y,b);return Object(p.jsxs)("div",{className:"form-group",children:[Boolean(r)&&Object(p.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",htmlFor:n,children:[r," ",m?Object(p.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(p.jsx)("div",{className:"flex flex-nowrap items-baseline",children:Object(p.jsx)("textarea",{id:n,name:o,ref:h,onChange:function(t){e.onChange&&e.onChange(t.target.value)},onBlur:function(t){e.onBlur&&e.onBlur(t)},placeholder:c||void 0,autoFocus:i||void 0,autoComplete:d||void 0,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring ".concat(w?"border-red-400 text-red-600":"")})}),Object(p.jsx)("div",{className:"text-red-600 text-sm mt-2",children:w}),Boolean(s)&&Object(p.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:s})]})}g.defaultProps={required:!1};var h=g,x=n(208),O=n(630),v=n(33).e().shape({name:b.a.string(Object(d.d)("entities.product.fields.name"),{required:!0,min:2,max:255}),description:b.a.string(Object(d.d)("entities.product.fields.description"),{max:21845}),unitPrice:b.a.decimal(Object(d.d)("entities.product.fields.unitPrice"),{required:!0,scale:2,min:.01,max:99999}),photos:b.a.images(Object(d.d)("entities.product.fields.photos"),{max:3})});t.a=function(e){var t=e.saveLoading,n=Object(l.useState)((function(){var t=e.record||{};return{name:t.name,description:t.description,unitPrice:t.unitPrice,photos:t.photos||[]}})),b=Object(a.a)(n,1)[0],f=Object(u.c)({resolver:Object(i.yupResolver)(v),mode:"all",defaultValues:b}),j=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return Object(p.jsx)(u.a,Object(r.a)(Object(r.a)({},f),{},{children:Object(p.jsxs)("form",{onSubmit:f.handleSubmit(j),children:[Object(p.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md",children:Object(p.jsx)(m.a,{name:"name",label:Object(d.d)("entities.product.fields.name"),required:!0,autoFocus:!0})}),Object(p.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(p.jsx)(h,{name:"description",label:Object(d.d)("entities.product.fields.description"),required:!1})}),Object(p.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(p.jsx)(m.a,{name:"unitPrice",label:Object(d.d)("entities.product.fields.unitPrice"),required:!0})}),Object(p.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(p.jsx)(O.a,{name:"photos",label:Object(d.d)("entities.product.fields.photos"),required:!1,storage:x.a.values.productPhotos,max:3})}),Object(p.jsxs)("div",{className:"pt-4",children:[Object(p.jsxs)("button",{className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",disabled:t,type:"button",onClick:f.handleSubmit(j),children:[Object(p.jsx)(c.a,{className:"mr-2",icon:o.e}),Object(d.d)("common.save")]}),Object(p.jsxs)("button",{disabled:t,onClick:function(){Object.keys(b).forEach((function(e){f.setValue(e,b[e])}))},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(p.jsx)(c.a,{className:"mr-2",icon:s.t}),Object(d.d)("common.reset")]}),e.onCancel?Object(p.jsxs)("button",{disabled:t,onClick:function(){return e.onCancel()},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(p.jsx)(c.a,{className:"mr-2",icon:s.s}),Object(d.d)("common.cancel")]}):null]})]})}))}},754:function(e,t,n){"use strict";n.r(t);var r=n(135),a=n(4),o=n(27),s=n(28),c=n(2),i=n(86),l=n(5),u=function(e){return e.order.form},d=Object(l.a)([u],(function(e){return e.record})),b={selectInitLoading:Object(l.a)([u],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:Object(l.a)([u],(function(e){return Boolean(e.saveLoading)})),selectRecord:d,selectRaw:u},m=n(8),f=n(0),j=n(560),p=n(25),g=n(71),h=n(566),x=n(556),O=n(564),v=n(637),y=n(662),w=n(208),k=n(669),C=n(557),N=n(7);function S(e){var t=e.label,n=e.name,r=e.hint,o=e.storage,s=e.formats,c=e.max,i=e.required,l=e.externalErrorMessage,u=Object(x.d)(),d=u.register,b=u.errors,m=u.formState,f=m.touched,j=m.isSubmitted,p=u.setValue,g=u.watch;Object(a.useEffect)((function(){d({name:n})}),[d,n]);var h=C.a.errorMessage(n,b,f,j,l);return Object(N.jsxs)("div",{children:[Boolean(t)&&Object(N.jsxs)("label",{className:"block text-sm text-gray-800 dark:text-gray-200",children:[t," ",i?Object(N.jsx)("span",{className:"text-sm text-red-400",children:"*"}):null]}),Object(N.jsx)(k.a,{storage:o,formats:s,value:g(n),onChange:function(t){p(n,t,{shouldValidate:!0}),e.onChange&&e.onChange(t)},max:c}),Object(N.jsx)("div",{className:"text-red-600 text-sm mt-2",children:h}),Boolean(r)&&Object(N.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:r})]})}S.defaultProps={max:void 0,required:!1};var P=S,B=n(667),T=n(19),M=n(57),E=n(1),U=n.n(E),q=n(3),I=n(112),F=n.n(I),L=n(6),V=n(701);var R=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),o=n[0],s=n[1],i=function(){var t=Object(q.a)(U.a.mark((function t(n,r){var a,o,c;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(!0),t.next=4,M.a.create(r);case 4:return a=t.sent,o=a.id,t.next=8,M.a.find(o);case 8:c=t.sent,e.onSuccess(c),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),L.a.handle(t.t0);case 15:return t.prev=15,s(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})));return function(e,n){return t.apply(this,arguments)}}();return F.a.createPortal(Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",tabIndex:-1,onClick:e.onClose,children:Object(N.jsx)("div",{className:"relative mx-auto w-auto max-h-screen pt-6 pb-6",onClick:function(e){return e.stopPropagation()},children:Object(N.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(N.jsxs)("div",{className:"flex items-start justify-between p-5 rounded-t",children:[Object(N.jsx)("div",{className:"text-lg font-semibold",children:Object(c.d)("entities.product.new.title")}),Object(N.jsx)("button",{type:"button",className:"ml-auto bg-transparent border-0 text-gray-900 float-right text-lg leading-none font-semibold outline-none focus:outline-none",onClick:e.onClose,children:Object(N.jsx)("span",{className:"bg-transparent text-gray-700 h-6 w-6 text-lg block outline-none focus:outline-none",children:Object(N.jsx)(g.a,{icon:p.s})})})]}),Object(N.jsx)("div",{className:"relative p-6 flex-auto overflow-y-scroll",children:Object(N.jsx)(V.a,{saveLoading:o,onSubmit:i,onCancel:e.onClose,modal:!0})})]})})}),Object(N.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}),document.getElementById("modal-root"))},A=n(581),D=n(652);var z=function(e){var t=Object(x.d)(),n=t.setValue,s=t.getValues,c=Object(a.useState)(!1),i=Object(r.a)(c,2),l=i[0],u=i[1],d=Object(o.e)(D.a.selectPermissionToCreate),b=function(){u(!1)};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(A.a,Object(f.a)(Object(f.a)({},e),{},{fetchFn:function(e,t){return M.a.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.name&&(n=e.name),{key:t,value:t,label:n}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){u(!0)},hasPermissionToCreate:d})),l&&Object(N.jsx)(R,{onClose:b,onSuccess:function(t){var r=e.name,a=e.mode;n(r,a&&"multiple"===a?[].concat(Object(T.a)(s()[r]||[]),[t]):t),b()}})]})},_=n(33).e().shape({customer:O.a.relationToOne(Object(c.d)("entities.order.fields.customer"),{required:!0}),products:O.a.relationToMany(Object(c.d)("entities.order.fields.products"),{required:!0,min:1}),employee:O.a.relationToOne(Object(c.d)("entities.order.fields.employee"),{}),delivered:O.a.boolean(Object(c.d)("entities.order.fields.delivered"),{}),attachments:O.a.files(Object(c.d)("entities.order.fields.attachments"),{max:3})});var Y=function(e){var t=e.saveLoading,n=Object(a.useState)((function(){var t=e.record||{};return{customer:t.customer,products:t.products||[],employee:t.employee,delivered:t.delivered,attachments:t.attachments||[]}})),o=Object(r.a)(n,1)[0],s=Object(x.c)({resolver:Object(h.yupResolver)(_),mode:"all",defaultValues:o}),i=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return Object(N.jsx)(x.a,Object(f.a)(Object(f.a)({},s),{},{children:Object(N.jsxs)("form",{onSubmit:s.handleSubmit(i),children:[Object(N.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md",children:Object(N.jsx)(B.a,{name:"customer",label:Object(c.d)("entities.order.fields.customer"),required:!0,showCreate:!e.modal})}),Object(N.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(N.jsx)(z,{name:"products",label:Object(c.d)("entities.order.fields.products"),required:!0,showCreate:!e.modal,mode:"multiple"})}),Object(N.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(N.jsx)(v.a,{name:"employee",label:Object(c.d)("entities.order.fields.employee"),required:!1,showCreate:!e.modal})}),Object(N.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(N.jsx)(y.a,{name:"delivered",label:Object(c.d)("entities.order.fields.delivered")})}),Object(N.jsx)("div",{className:"w-full sm:w-md md:w-md lg:w-md mt-4",children:Object(N.jsx)(P,{name:"attachments",label:Object(c.d)("entities.order.fields.attachments"),required:!1,storage:w.a.values.orderAttachments,max:3,formats:["txt","pdf"]})}),Object(N.jsxs)("div",{className:"pt-4",children:[Object(N.jsxs)("button",{className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",disabled:t,type:"button",onClick:s.handleSubmit(i),children:[Object(N.jsx)(g.a,{className:"mr-2",icon:j.e}),Object(c.d)("common.save")]}),Object(N.jsxs)("button",{disabled:t,onClick:function(){Object.keys(o).forEach((function(e){s.setValue(e,o[e])}))},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(N.jsx)(g.a,{className:"mr-2",icon:p.t}),Object(c.d)("common.reset")]}),e.onCancel?Object(N.jsxs)("button",{disabled:t,onClick:function(){return e.onCancel()},className:"mr-2 mb-2 text-sm disabled:opacity-50 disabled:cursor-default px-4 py-2 tracking-wide dark:border-gray-800 dark:bg-gray-800 dark:hover:bg-gray-600 dark:text-white text-gray-700 border border-gray-300 transition-colors duration-200 transform bg-white rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100",type:"button",children:[Object(N.jsx)(g.a,{className:"mr-2",icon:p.s}),Object(c.d)("common.cancel")]}):null]})]})}))},W=n(558),Z=n(563);t.default=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),l=n[0],u=n[1],d=Object(o.d)(),f=Object(s.h)(),j=Object(o.e)(b.selectInitLoading),p=Object(o.e)(b.selectSaveLoading),g=Object(o.e)(b.selectRecord),h=Boolean(f.params.id),x=h?Object(c.d)("entities.order.edit.title"):Object(c.d)("entities.order.new.title");return Object(a.useEffect)((function(){d(i.a.doInit(f.params.id)),u(!0)}),[d,f.params.id]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(W.a,{items:[[Object(c.d)("dashboard.menu"),"/"],[Object(c.d)("entities.order.menu"),"/order"],[x]]}),Object(N.jsxs)("div",{className:"mt-4 p-6 bg-white dark:bg-gray-800 dark:border-gray-800 text-gray-900 dark:text-gray-200 border-gray-200 border rounded-md",children:[Object(N.jsx)("h1",{className:"text-lg font-medium mb-6",children:x}),j&&Object(N.jsx)(Z.a,{}),l&&!j&&Object(N.jsx)(Y,{saveLoading:p,initLoading:j,record:g,isEditing:h,onSubmit:function(e,t){d(h?i.a.doUpdate(e,t):i.a.doCreate(t))},onCancel:function(){return Object(m.b)().push("/order")}})]})]})}}}]);